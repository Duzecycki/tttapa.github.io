<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="author" content="Pieter P"/>
    <link rel="stylesheet" type="text/css" href="/CSS/Pages.css"/>
    <link href='/CSS/roboto.css' rel='stylesheet' type='text/css'/>
    <link href='/CSS/icon.css' rel='stylesheet' type='text/css'/>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } },
            "fast-preview": {
            disabled: true
            }
        });
    </script>
    <script type="text/javascript" src="/MathJax/MathJax.js?config=TeX-AMS_SVG"></script>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
    <meta name="theme-color" content="#ccc"/>
    <meta name="keywords" content=""/>
    <meta name="description" content="Configuring the Raspberry Pi 3 to connect to a WiFi Access Point using Netplan."/>
    <title>Setting up the WiFi Connection</title>
</head>
<body>
    <nav>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" style="position:absolute;top:4px;right: 4px;">
                <path d="M0 0h48v48h-48z" fill="none"/>
                <path d="M6 36h36v-4h-36v4zm0-10h36v-4h-36v4zm0-14v4h36v-4h-36z"/>
            </svg>
            <h2><a href="/">Home</a></h2>
<ul>
    <li class="expanded"><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../index.html">Raspberry Pi</a>
    <ul>
        <li class="expanded"><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="index.html">Installation and Setup</a>
        <ul>
            <li><span class="ftriangle"></span><a href="Setting-up-Ubuntu.html">Installing and Setting up Ubuntu</a></li>
            <li><span class="ftriangle"></span><a class="openEntry" href="WiFi-Setup.html">Setting up the WiFi Connection</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../Python-Development/index.html">Python Development</a>
        <ul>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../C++-Development/index.html">C++ Development</a>
        <ul>
            <li><span class="ftriangle"></span><a href="../C++-Development/Building-The-Toolchain.html">Building the Cross-Compilation Toolchain</a></li>
            <li><span class="ftriangle"></span><a href="../C++-Development/Dependencies.html">Cross-Compiling the Dependencies</a></li>
            <li><span class="ftriangle"></span><a href="../C++-Development/Editor-Setup.html">Setting up Visual Studio Code for C++ Development</a></li>
            <li><span class="ftriangle"></span><a href="../C++-Development/Cpp-Program.html">Cross-Compiling the C++ Example Project</a></li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/index.html">Arduino</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/Audio-and-Signal-Processing/index.html">Audio and Signal Processing</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/Audio-and-Signal-Processing/VU-Meters/index.html">VU Meters</a>
            <ul>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/Control-Surface/index.html">Control Surface</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/Control-Surface/Developers/index.html">Developers</a>
            <ul>
                <li><span class="ftriangle"></span><a href="../../Arduino/Control-Surface/Developers/Installation.html">Installation</a></li>
                <li><span class="ftriangle"></span><a href="../../Arduino/Control-Surface/Developers/Style.html">Style</a></li>
                <li><span class="ftriangle"></span><a href="../../Arduino/Control-Surface/Developers/Tests.html">Tests</a></li>
                <li><span class="ftriangle"></span><a href="../../Arduino/Control-Surface/Developers/Generating-Documentation.html">Generating Documentation</a></li>
            </ul>
            </li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/Bootloaders/index.html">Bootloaders</a>
        <ul>
            <li><span class="ftriangle"></span><a href="../../Arduino/Bootloaders/ATmega328P-custom-frequency.html">Compiling Optiboot - ATmega328P at custom frequency</a></li>
        </ul>
        </li>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/ESP8266/index.html">ESP8266</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Arduino/ESP8266/Flashing/index.html">Flashing</a>
            <ul>
                <li><span class="ftriangle"></span><a href="../../Arduino/ESP8266/Flashing/Flashing-With-an-Arduino.html">Flashing the ESP8266 with an Arduino UNO</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/index.html">Mathematics</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/Systems-and-Control-Theory/index.html">Systems and Control Theory</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/Systems-and-Control-Theory/Analog-Filters/index.html">Analog Filters &amp; Systems</a>
            <ul>
                <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Analog-Filters/Butterworth-Filters.html">Butterworth Filters</a></li>
            </ul>
            </li>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/index.html">Digital Filters &amp; Systems</a>
            <ul>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/index.html">DTLTI Systems, Transfer Functions, and the Z-transform</a>
                <ul>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/DTLTI-Systems.html">DTLTI Systems</a></li>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/Impulse-and-Step-Response.html">Impulse and Step Response</a></li>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/DTLTI-Systems,-Transfer-Functions,-and-the-Z-transform/The-Z-transform.html">The Z-transform</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/index.html">Exponential Moving Average</a>
                <ul>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/Exponential-Moving-Average.html">Exponential Moving Average</a></li>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/Filtering-in-MATLAB.html">Filtering in MATLAB</a></li>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Exponential Moving Average/C++Implementation.html">C++ Implementation</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/index.html">Simple Moving Average</a>
                <ul>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/Simple-Moving-Average.html">Simple Moving Average</a></li>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Simple Moving Average/C++Implementation.html">C++ Implementation</a></li>
                </ul>
                </li>
                <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/index.html">Discretization</a>
                <ul>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/Bilinear-transform.html">Bilinear Transform</a></li>
                    <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/Discretization/Discretization-of-a-fourth-order-Butterworth-filter.html">Discretization of a Fourth-Order Butterworth Filter</a></li>
                </ul>
                </li>
                <li><span class="ftriangle"></span><a href="../../Mathematics/Systems-and-Control-Theory/Digital-filters/FIR-Notch.html">Simple Finite Impulse Response Notch Filter</a></li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Ubuntu/index.html">Ubuntu</a>
    <ul>
        <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Ubuntu/Software-Installation/index.html">Software Installation</a>
        <ul>
            <li><span class="dtriangle" onclick="this.parentElement.classList.toggle('expanded');"></span><a href="../../Ubuntu/Software-Installation/Arduino/index.html">Arduino</a>
            <ul>
                <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/Arduino/Arduino-IDE.html">Arduino IDE</a></li>
                <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/Arduino/Hairless-MIDI.html">The Hairless MIDI to Serial Bridge</a></li>
            </ul>
            </li>
            <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/BlueZ.html">BlueZ with MIDI over BLE Support</a></li>
            <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/Doxygen.html">Doxygen</a></li>
            <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/Eclipse.html">Eclipse</a></li>
            <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/Java.html">Java</a></li>
            <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/Python.html">Python</a></li>
            <li><span class="ftriangle"></span><a href="../../Ubuntu/Software-Installation/VirtualBox.html">VirtualBox</a></li>
        </ul>
        </li>
    </ul>
    </li>
</ul>

            <i class="material-icons">
                <a href="/" title="Home">home</a>
            </i>
            <i class="material-icons">
                <a href="WiFi-Setup.pdf" title="Download as PDF">get_app</a>
            </i>
            <i class="material-icons">
                <a href="javascript:window.print()" title="Print this article">print</a>
            </i>
            <i class="material-icons">
                <a href="https://github.com/tttapa/tttapa.github.io/issues/new" target="_blank" title="Comment or open an issue">report</a>
            </i>
        </div>
    </nav>
    <article>
        <h1 class="title">Setting up the WiFi Connection</h1>
        <i class="author">Pieter P</i>
        <div>

<style>
    pre.pi>code::before {
        content: "pi $";
        width: initial;
        font-weight: bold;
    }
</style>

<p>
    Ubuntu Server 18.04 uses <a href="https://netplan.io/">Netplan</a> to configure the network interfaces.
    This page contains a simple configuration file to get the Raspberry Pi connected to a WiFi network.<br>
    For the full documentation and more advanced configurations, I'll refer to the
    <a href="https://netplan.io/reference">Netplan reference</a>.
</p>

<h3><a name="configuring-the-wifi-if-you-already-have-access-to-the-pi-s-console" href="#configuring-the-wifi-if-you-already-have-access-to-the-pi-s-console">Configuring the WiFi if you already have access to the Pi's console</a></h3>

<p>
    Follow this section if you already have access to the console of the Pi,
    either over SSH using the Ethernet connection, or using the serial port.
</p>
<h4><a name="ssh-over-ethernet" href="#ssh-over-ethernet">SSH over Ethernet</a></h4>
<p>
    Connect to the Raspberry Pi over SSH, as explained on the <a href="Setting-up-Ubuntu.html">Setting up Ubuntu
        page</a>:
</p>
<pre class="console"><code>ssh RPi3</code></pre>

<h4><a name="terminal-over-the-serial-port" href="#terminal-over-the-serial-port">Terminal over the Serial Port</a></h4>

<p>
    If you don't have access to an Ethernet connection, you can connect a 3.3V
    UART to USB or 3.3V UART to RS-232 adapter to the Pi's serial port (TX (GPIO14) and RX (GPIO15), see the
    <a href="https://www.raspberrypi.org/documentation/usage/gpio/">raspberrypi.org GPIO documentation</a>).<br>
</p>
<p>
    On your computer, install <code>screen</code>:
    <pre class="console"><code>sudo apt install screen</code></pre>
    Then open the serial port using screen:
    <pre class="console"><code>screen /dev/ttyUSB0 115200</code></pre>
    Replace <code>/dev/ttyUSB0</code> with the actual tty the Pi is connected
    to. <code>115200</code> is the baud rate.
</p>
<p>
    Now that you have access to the Pi, you can start configuring the network.
</p>
<h4><a name="disabling-cloud-init" href="#disabling-cloud-init">Disabling Cloud Init</a></h4>
<p>
    By default, Ubuntu uses Cloud Init to automatically configure the network.
    This is useful when installing it on a server that you don't have physical
    access to, but we want to configure the network ourselves here, so we'll
    disable it:
    <pre
        class="console pi"><code>sudo bash -c "echo 'network: {config: disabled}' > /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg"</code></pre>
</p>
<h4><a name="configuring-netplan" href="#configuring-netplan">Configuring Netplan</a></h4>
<p>
    Next, create your Netplan configuration:
    <pre class="console pi"><code>sudo nano /etc/netplan/10-my-config.yaml</code></pre>
    If you just want a simple WiFi and Ethernet configuration, you can use the following:
</p>
<div class="codesnippet"><style>.pygments72 .hll { background-color: #ffffcc }
.pygments72  { background: #f8f8f8; }
.pygments72 .c { color: #408080; font-style: italic } /* Comment */
.pygments72 .err { border: 1px solid #FF0000 } /* Error */
.pygments72 .k { color: #008000; font-weight: bold } /* Keyword */
.pygments72 .o { color: #666666 } /* Operator */
.pygments72 .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.pygments72 .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.pygments72 .cp { color: #BC7A00 } /* Comment.Preproc */
.pygments72 .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.pygments72 .c1 { color: #408080; font-style: italic } /* Comment.Single */
.pygments72 .cs { color: #408080; font-style: italic } /* Comment.Special */
.pygments72 .gd { color: #A00000 } /* Generic.Deleted */
.pygments72 .ge { font-style: italic } /* Generic.Emph */
.pygments72 .gr { color: #FF0000 } /* Generic.Error */
.pygments72 .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.pygments72 .gi { color: #00A000 } /* Generic.Inserted */
.pygments72 .go { color: #888888 } /* Generic.Output */
.pygments72 .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.pygments72 .gs { font-weight: bold } /* Generic.Strong */
.pygments72 .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.pygments72 .gt { color: #0044DD } /* Generic.Traceback */
.pygments72 .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.pygments72 .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.pygments72 .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.pygments72 .kp { color: #008000 } /* Keyword.Pseudo */
.pygments72 .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.pygments72 .kt { color: #B00040 } /* Keyword.Type */
.pygments72 .m { color: #666666 } /* Literal.Number */
.pygments72 .s { color: #BA2121 } /* Literal.String */
.pygments72 .na { color: #7D9029 } /* Name.Attribute */
.pygments72 .nb { color: #008000 } /* Name.Builtin */
.pygments72 .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.pygments72 .no { color: #880000 } /* Name.Constant */
.pygments72 .nd { color: #AA22FF } /* Name.Decorator */
.pygments72 .ni { color: #999999; font-weight: bold } /* Name.Entity */
.pygments72 .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.pygments72 .nf { color: #0000FF } /* Name.Function */
.pygments72 .nl { color: #A0A000 } /* Name.Label */
.pygments72 .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.pygments72 .nt { color: #008000; font-weight: bold } /* Name.Tag */
.pygments72 .nv { color: #19177C } /* Name.Variable */
.pygments72 .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.pygments72 .w { color: #bbbbbb } /* Text.Whitespace */
.pygments72 .mb { color: #666666 } /* Literal.Number.Bin */
.pygments72 .mf { color: #666666 } /* Literal.Number.Float */
.pygments72 .mh { color: #666666 } /* Literal.Number.Hex */
.pygments72 .mi { color: #666666 } /* Literal.Number.Integer */
.pygments72 .mo { color: #666666 } /* Literal.Number.Oct */
.pygments72 .sa { color: #BA2121 } /* Literal.String.Affix */
.pygments72 .sb { color: #BA2121 } /* Literal.String.Backtick */
.pygments72 .sc { color: #BA2121 } /* Literal.String.Char */
.pygments72 .dl { color: #BA2121 } /* Literal.String.Delimiter */
.pygments72 .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.pygments72 .s2 { color: #BA2121 } /* Literal.String.Double */
.pygments72 .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.pygments72 .sh { color: #BA2121 } /* Literal.String.Heredoc */
.pygments72 .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.pygments72 .sx { color: #008000 } /* Literal.String.Other */
.pygments72 .sr { color: #BB6688 } /* Literal.String.Regex */
.pygments72 .s1 { color: #BA2121 } /* Literal.String.Single */
.pygments72 .ss { color: #19177C } /* Literal.String.Symbol */
.pygments72 .bp { color: #008000 } /* Name.Builtin.Pseudo */
.pygments72 .fm { color: #0000FF } /* Name.Function.Magic */
.pygments72 .vc { color: #19177C } /* Name.Variable.Class */
.pygments72 .vg { color: #19177C } /* Name.Variable.Global */
.pygments72 .vi { color: #19177C } /* Name.Variable.Instance */
.pygments72 .vm { color: #19177C } /* Name.Variable.Magic */
.pygments72 .il { color: #666666 } /* Literal.Number.Integer.Long */
.pygments72 pre.snippet72 { counter-reset: line 0; }</style><a href="https://github.com/tttapa/tttapa.github.io/blob/51671e6aa79f4cc9507ae1dc7f7d5685cf48103a/Pages-src/Raw-HTML/Raspberry-Pi/Installation+Setup/resources/10-my-config.yaml" title="Open on GitHub"><img class="github-mark" src="/Images/GitHub-Mark.svg"/></a>
<div class="pygments72"><pre class="lineNumbers snippet72"><code><span></span><span class="nt">network</span><span class="p">:</span></code>
<code>  <span class="nt">version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span></code>
<code>  <span class="nt">ethernets</span><span class="p">:</span></code>
<code>    <span class="nt">eth0</span><span class="p">:</span></code>
<code>      <span class="nt">dhcp4</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span></code>
<code>      <span class="nt">optional</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span></code>
<code>  <span class="nt">wifis</span><span class="p">:</span></code>
<code>    <span class="nt">wlan0</span><span class="p">:</span></code>
<code>      <span class="nt">dhcp4</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span></code>
<code>      <span class="nt">optional</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span></code>
<code>      <span class="nt">access-points</span><span class="p">:</span></code>
<code>        <span class="s">&quot;Your-WiFi-Network-Name&quot;</span><span class="p p-Indicator">:</span></code>
<code>          <span class="nt">password</span><span class="p">:</span> <span class="s">&quot;******&quot;</span></code></pre></div>
</div>
<p>
    Be sure to fill in your WiFi network details, and then use <code>Ctrl+X</code> to exit. Answer <code>y</code> to the
    question <code>Save modified buffer?</code> and press enter to confirm the filename.
</p>
<p>
    Finally, generate and apply the configuration:
</p>
<pre class="console"><code>sudo netplan generate</code>
<code>sudo netplan apply</code></pre>

<h3><a name="configuring-the-wifi-if-you-don-t-have-access-to-the-pi-s-console" href="#configuring-the-wifi-if-you-don-t-have-access-to-the-pi-s-console">Configuring the WiFi if you don't have access to the Pi's console</a></h3>

<p>
    If you can't reach the Pi's console, because you have no Ethernet connection
    and if you can't connect to the serial port either, you can configure the 
    network by editing the files on the SD card.
</p>
<p>
    Mount the <code>writable</code> partition of the SD card on your computer, 
    and follow the same steps as in the case where you do have access to the 
    console.
</p>
<pre class="console"><code>sudo bash -c "echo 'network: {config: disabled}' > /media/$USER/writable/etc/cloud/cloud.cfg.d/99-disable-network-config.cfg"</code>
<code>sudo nano /media/$USER/writable/etc/netplan/10-my-config.yaml</code></pre>
<p>
    Now close the terminal, and safely remove the SD card. You don't have to run
    any <code>netplan</code> commands, the configuration will be applied 
    automatically when you boot the Pi.
</p>

</div>
        <hr id="end-of-article">
        <div class="nextupprev"></div>
    </article>
    <footer>Last edited: Sunday, 15 September 2019 15:54 UTC</footer>
</body>

</html>